<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragmentos/head::head}">
	<meta charset="UTF-8">
	<title>Gestión categorias</title>
</head>

<body>
	<div id="menu">
			<a th:href="@{/}" class="btn btn-primary">Inicio</a>
			<a href="#" th:href="@{/logout}" class="btn btn-danger">Salir</a>
			<a th:href="@{/categoria/nueva}">Nueva categoria</a>
			<a th:href="@{/producto}">Gestión de productos</a>		
			<a th:href="@{/cliente/}">Gestión de clientes</a>
		</div>
		
		<div class="alert alert-warning alert-dismissible" role="alert" th:if="${param.error}">
							<button type="button" class="close" data-dismiss="alert" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<span>No se puede borrar una categoría que tiene productos asociados
						</div>
		<table border=1>
							<thead>
								<tr>
									<th>Imagen</th>
									<th>Nombre</th>
									<th>Operaciones</th>
								</tr>
							</thead>
							<tbody>
		
		
								<tr th:each="categoria : ${categorias}">
									<td><img th:src="${not (#strings.isEmpty(categoria.imagen))} ? ${categoria.imagen} : 'http://placehold.it/48x48'"
											class="img-responsive icono-categoria" alt="imagen" /></td>
									<td th:text="${categoria.nombre}"></td>
									<td class="operaciones"><a href="#"
											th:href="@{/categoria/editar/{id}(id=${categoria.id})}"
											class="btn btn-primary">Editar</a>
										<button type="button" class="btn btn-danger" data-toggle="modal"
											data-target="#delete-modal" th:data-id="${categoria.id}">Borrar</button>
									</td>
								</tr>
							</tbody>
						</table>
						<div class="modal fade" id="delete-modal" tabindex="-1" role="dialog">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
											<h4 class="modal-title">Borrar categoría</h4>
										</div>
										<div class="modal-body">
											<p>¿Está usted seguro de borrar esta categoría?</p>
											<button type="button" class="btn btn-default" data-dismiss="modal">No</button>
											<a href="/categoria/borrar/" class="btn btn-danger">Sí</a>
										</div>
									</div>
						
								</div>
				
				</div>
				<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
					<!-- Include all compiled plugins (below), or include individual files as needed -->
					<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
				
					<script src="../static/js/javascript.js" th:src="@{/js/javascript.js}"></script>
	
</body>

</html>